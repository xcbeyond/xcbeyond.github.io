<!DOCTYPE html>
<html lang="zh-cn"><head>
  <meta charset="utf-8">
  
  <title>从 JDK 8 到 JDK 17：Swagger 升级迁移指南 | xcbeyond</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description"
    content="随着 Java 生态向 JDK 17 及 `Jakarta EE` 的演进，许多项目面临从 JDK 8 升级的挑战，其中 `Swagger`（API 文档工具）的兼容性调整尤为关键。本文将从 **技术栈差异、升级迁移步骤、常见问题** 等多个维度，解析 JDK 8（`SpringFox`）向 JDK 17（`SpringDoc/Knife4j`）的升级路径。">
  
  <meta name="author" content="xcbeyond">
  <meta name="generator" content="Hugo 0.81.0" />
  <!-- multilingual SEO optimizations -->
  
  <!-- baidu-site-verification -->
  <meta name="baidu-site-verification" content="code-uBVGWgwQY4" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://xcbeyond.cn/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://xcbeyond.cn/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="https://xcbeyond.cn/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="https://xcbeyond.cn/plugins/venobox/venobox.css">
  
  <link rel="stylesheet" href="https://xcbeyond.cn/plugins/themify-icons/themify-icons.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://xcbeyond.cn/scss/style.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://xcbeyond.cn/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://xcbeyond.cn/images/favicon.png" type="image/x-icon">

  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?cfe04dc165f36b6fa1cd42bfabe5424f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</head><body>
<header class="header">
  
  
  
  <div class="navigation w-100 ">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-dark p-0">
        <a class="navbar-brand" href="/"><img class="img-fluid"
            src="https://xcbeyond.cn/images/logo.png" alt="xcbeyond"></a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="https://xcbeyond.cn">首页</a>
            </li>
            
            
            <li class="nav-item">
              <a class="nav-link" href="https://xcbeyond.cn/blog">博客</a>
            </li>
            
            
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown">
                文档
              </a>
              <div class="dropdown-menu">
                
                <a class="dropdown-item" href="https://xcbeyond.cn/golang-handbook">Golang 实践手册</a>
                
                <a class="dropdown-item" href="https://xcbeyond.cn/istio-handbook">Istio 实践手册</a>
                
                <a class="dropdown-item" href="https://xcbeyond.cn/kubernetes-handbook">Kubernetes 实践手册</a>
                
              </div>
            </li>
            
            
            
            <li class="nav-item">
              <a class="nav-link" href="https://xcbeyond.cn/about">关于</a>
            </li>
            
            
          </ul>

          
          
        </div>
      </nav>
    </div>
  </div>
</header>


	
<section class="page-title-section overlay" style="background-image: url('/'),url('/images/backgrounds/page-title.jpg');" >
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul class="list-inline custom-breadcrumb">
          
          <li class="list-inline-item text-white h2 font-secondary">从 JDK 8 到 JDK 17：Swagger 升级迁移指南</li>
        </ul>
        <p class="text-lighten">随着 Java 生态向 JDK 17 及 <code>Jakarta EE</code> 的演进，许多项目面临从 JDK 8 升级的挑战，其中 <code>Swagger</code>（API 文档工具）的兼容性调整尤为关键。本文将从 <strong>技术栈差异、升级迁移步骤、常见问题</strong> 等多个维度，解析 JDK 8（<code>SpringFox</code>）向 JDK 17（<code>SpringDoc/Knife4j</code>）的升级路径。</p>
      </div>
    </div>
  </div>
</section>
	


<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          <div class="col-12 mb-4">
            <img src="/images/blog/jdk17-upgrade-swagger.png" alt="blog-thumb" class="img-fluid w-100">
          </div>
          <div class="col-12">
            <ul class="list-inline">
              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">作者
                  :</span><a
                  href="/author/xcbeyond">Xcbeyond</a></li>

              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">发表于
                  :</span>2025-05-30 08:30:01 </li>

              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">分类
                  :</span><a
                  href="/categories/java"> 
                  Java</a> </li>

              

            </ul>
          </div>
          
          <div class="col-12 my-4">
            <div class="border-bottom"></div>
          </div>
          
          <div class="col-12 mb-5 content">
            <p>随着 Java 生态向 JDK 17 及 <code>Jakarta EE</code> 的演进，许多项目面临从 JDK 8 升级的挑战，其中 <code>Swagger</code>（API 文档工具）的兼容性调整尤为关键。本文将从 <strong>技术栈差异、升级迁移步骤、常见问题</strong> 等多个维度，解析 JDK 8（<code>SpringFox</code>）向 JDK 17（<code>SpringDoc/Knife4j</code>）的升级路径。</p>
<h2 id="1背景">1、背景</h2>
<h3 id="11-技术演进">1.1 技术演进</h3>
<ul>
<li>
<p><strong>JDK 版本演进：</strong></p>
<p>JDK 17 是继 JDK 8 后的首个 LTS 版本，支持模块化、<code>Records</code> 等新特性，但移除了部分旧 API（如 <code>javax.servlet</code>）。</p>
<p>直接影响：基于 JDK 8 构建的 <code>SpringFox</code>（<code>Swagger 2.x</code>）因依赖旧规范无法兼容新版本。</p>
</li>
<li>
<p><strong>Jakarta EE 的崛起：</strong></p>
<p>Java EE 移交 Eclipse 基金会后更名为 <code>Jakarta EE</code>，包名从 <code>javax.*</code> 改为 <code>jakarta.*</code>。</p>
<p>核心冲突：<code>Spring Boot 3.x</code> 和 <code>SpringDoc</code>（<code>Swagger 3.x</code>）强制依赖 <code>Jakarta EE 9+</code>，导致旧项目升级时需全局替换包名。</p>
</li>
</ul>
<h3 id="12-升级的必要性">1.2 升级的必要性</h3>
<ul>
<li>
<p>安全风险：<code>SpringFox</code> 已停止维护，存在未修复漏洞（如 CVE-2021-28170）。</p>
</li>
<li>
<p>功能需求：<code>SpringDoc</code> 支持 <code>OpenAPI 3.0</code> 规范，提供更灵活的文档定义和响应示例。</p>
</li>
<li>
<p>生态兼容：微服务、云原生场景下，JDK 17 的容器化支持更优。</p>
</li>
</ul>
<h2 id="2技术栈对比与选型">2、技术栈对比与选型</h2>
<h3 id="21-jdk-8-与-jdk-17-的-swagger-技术栈对比">2.1 JDK 8 与 JDK 17 的 Swagger 技术栈对比</h3>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>JDK 8 + SpringFox (Swagger 2.x)</strong></th>
<th><strong>JDK 17 + SpringDoc/Knife4j (Swagger 3.x)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>核心框架</strong></td>
<td><code>SpringFox 2.x</code>（已停止维护）</td>
<td><code>SpringDoc OpenAPI 3.x</code>（官方推荐）</td>
</tr>
<tr>
<td><strong>JDK 兼容性</strong></td>
<td>仅支持 JDK 8~11</td>
<td>支持 JDK 17+ 的模块化特性</td>
</tr>
<tr>
<td><strong>Spring Boot 支持</strong></td>
<td><code>Spring Boot 2.x</code></td>
<td><code>Spring Boot 3.x</code>（兼容 <code>2.7.x</code>）</td>
</tr>
<tr>
<td><strong>Servlet 规范</strong></td>
<td>基于 <code>javax.servlet</code></td>
<td>迁移至 <code>jakarta.servlet</code>（<code>Jakarta EE 9+</code>）</td>
</tr>
<tr>
<td><strong>注解库</strong></td>
<td><code>io.swagger.annotations</code></td>
<td><code>io.swagger.v3.oas.annotations</code></td>
</tr>
<tr>
<td><strong>注解风格</strong></td>
<td><code>@Api</code>, <code>@ApiOperation</code></td>
<td><code>@Tag</code>, <code>@Operation</code>（更符合 <code>OpenAPI 3.0</code>）</td>
</tr>
<tr>
<td><strong>依赖管理</strong></td>
<td>需手动管理版本，易冲突</td>
<td>通过 <code>Spring Boot Starter</code> 简化依赖</td>
</tr>
<tr>
<td><strong>文档生成</strong></td>
<td>需配置 <code>Docket</code></td>
<td>自动扫描，通过 <code>OpenAPI</code> Bean 全局配置</td>
</tr>
<tr>
<td><strong>文档规范</strong></td>
<td><code>OpenAPI 2.0</code></td>
<td><code>OpenAPI 3.0</code></td>
</tr>
<tr>
<td><strong>UI 工具</strong></td>
<td><a href="https://swagger.io/tools/swagger-ui/">Swagger UI</a>（基础功能）</td>
<td><a href="https://doc.xiaominfo.com/">Knife4j</a>（增强功能，支持离线文档、权限控制、接口分组等）</td>
</tr>
<tr>
<td><strong>维护状态</strong></td>
<td>停止维护（最后版本 <code>3.0.0</code>）</td>
<td>活跃维护（<code>SpringDoc 2.x</code> + <code>Knife4j 4.x</code>）</td>
</tr>
</tbody>
</table>
<h3 id="22-版本兼容性矩阵">2.2 版本兼容性矩阵</h3>
<table>
<thead>
<tr>
<th>技术栈</th>
<th>JDK 8</th>
<th>JDK 11</th>
<th>JDK 17</th>
<th>Spring Boot 2.7.x</th>
<th>Spring Boot 3.x</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SpringFox 2.x</strong></td>
<td>✅</td>
<td>⚠️ 部分兼容</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>SpringDoc 1.x</strong></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>SpringDoc 2.x</strong></td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<h2 id="3快速升级步骤">3、快速升级步骤</h2>
<h3 id="31-依赖管理升级">3.1 依赖管理升级</h3>
<ol>
<li>
<p>移除旧依赖</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!-- 删除 SpringFox 相关依赖 --&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
   <span style="color:#f92672">&lt;groupId&gt;</span>io.springfox<span style="color:#f92672">&lt;/groupId&gt;</span>
   <span style="color:#f92672">&lt;artifactId&gt;</span>springfox-swagger2<span style="color:#f92672">&lt;/artifactId&gt;</span>
   <span style="color:#f92672">&lt;version&gt;</span>3.0.0<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
   <span style="color:#f92672">&lt;groupId&gt;</span>io.springfox<span style="color:#f92672">&lt;/groupId&gt;</span>
   <span style="color:#f92672">&lt;artifactId&gt;</span>springfox-swagger-ui<span style="color:#f92672">&lt;/artifactId&gt;</span>
   <span style="color:#f92672">&lt;version&gt;</span>3.0.0<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div></li>
<li>
<p>添加新依赖</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!-- SpringDoc 核心 --&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
   <span style="color:#f92672">&lt;groupId&gt;</span>org.springdoc<span style="color:#f92672">&lt;/groupId&gt;</span>
   <span style="color:#f92672">&lt;artifactId&gt;</span>springdoc-openapi-starter-webmvc-ui<span style="color:#f92672">&lt;/artifactId&gt;</span>
   <span style="color:#75715e">&lt;!-- 最新版本见：https://springdoc.org/ --&gt;</span>
   <span style="color:#f92672">&lt;version&gt;</span>2.5.0<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>

<span style="color:#75715e">&lt;!-- Knife4j 增强 UI（可选） --&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
   <span style="color:#f92672">&lt;groupId&gt;</span>com.github.xiaoymin<span style="color:#f92672">&lt;/groupId&gt;</span>
   <span style="color:#f92672">&lt;artifactId&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span style="color:#f92672">&lt;/artifactId&gt;</span>
   <span style="color:#75715e">&lt;!-- 最新版本见：https://doc.xiaominfo.com/ --&gt;</span>
   <span style="color:#f92672">&lt;version&gt;</span>4.5.0<span style="color:#f92672">&lt;/version&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div></li>
<li>
<p>排除冲突依赖</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;!-- 检查并排除其他库中的 javax.servlet 依赖 --&gt;</span>
<span style="color:#f92672">&lt;dependency&gt;</span>
   <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color:#f92672">&lt;/groupId&gt;</span>
   <span style="color:#f92672">&lt;artifactId&gt;</span>tomcat-embed-core<span style="color:#f92672">&lt;/artifactId&gt;</span>
   <span style="color:#f92672">&lt;exclusions&gt;</span>
      <span style="color:#f92672">&lt;exclusion&gt;</span>
            <span style="color:#f92672">&lt;groupId&gt;</span>javax.servlet<span style="color:#f92672">&lt;/groupId&gt;</span>
            <span style="color:#f92672">&lt;artifactId&gt;</span>javax.servlet-api<span style="color:#f92672">&lt;/artifactId&gt;</span>
      <span style="color:#f92672">&lt;/exclusion&gt;</span>
   <span style="color:#f92672">&lt;/exclusions&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div></li>
</ol>
<h3 id="32-代码层迁移注解更新">3.2 代码层迁移（注解更新）</h3>
<p><strong>控制器注解迁移：</strong></p>
<table>
<thead>
<tr>
<th><strong>SpringFox (Swagger 2.x)</strong></th>
<th><strong>SpringDoc (OpenAPI 3.x)</strong></th>
<th><strong>用途</strong></th>
<th><strong>示例</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Api</code></td>
<td><code>@Tag</code></td>
<td>标记控制器类的作用</td>
<td><code>@Tag(name = &quot;用户管理&quot;, description = &quot;用户接口&quot;)</code></td>
</tr>
<tr>
<td><code>@ApiOperation</code></td>
<td><code>@Operation</code></td>
<td>描述接口方法的功能</td>
<td><code>@Operation(summary = &quot;创建用户&quot;, description = &quot;根据DTO创建用户&quot;)</code></td>
</tr>
<tr>
<td><code>@ApiParam</code></td>
<td><code>@Parameter</code></td>
<td>描述接口参数（路径、查询、表单参数等）</td>
<td><code>@Parameter(name = &quot;id&quot;, description = &quot;用户ID&quot;, required = true)</code></td>
</tr>
<tr>
<td><code>@ApiResponse</code></td>
<td><code>@ApiResponse</code></td>
<td>定义接口的响应状态码和描述</td>
<td><code>@ApiResponse(responseCode = &quot;404&quot;, description = &quot;用户不存在&quot;)</code></td>
</tr>
<tr>
<td><code>@ApiIgnore</code></td>
<td><code>@Hidden</code> 或 <code>@Parameter(hidden = true)</code></td>
<td>隐藏接口或参数</td>
<td><code>@Hidden // 隐藏整个接口方法</code></td>
</tr>
<tr>
<td><code>@ApiImplicitParams</code></td>
<td><code>@Parameters</code> + <code>@Parameter</code></td>
<td>描述非直接声明的参数（如 Header 参数）</td>
<td><code>@Parameters({ @Parameter(name = &quot;token&quot;, in = HEADER, description = &quot;认证令牌&quot;) })</code></td>
</tr>
<tr>
<td><code>@ApiImplicitParam</code></td>
<td><code>@Parameter</code></td>
<td>单个隐式参数定义</td>
<td>同上</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDK 8（SpringFox）
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Api</span><span style="color:#f92672">(</span>tags <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户管理&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户接口&#34;</span><span style="color:#f92672">)</span>
<span style="color:#a6e22e">@RestController</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserController</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@ApiOperation</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;创建用户&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#a6e22e">@PostMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/users&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> User <span style="color:#a6e22e">createUser</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@ApiParam</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;用户DTO&#34;</span><span style="color:#f92672">)</span> <span style="color:#a6e22e">@RequestBody</span> UserDTO dto<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

   <span style="color:#a6e22e">@ApiImplicitParams</span><span style="color:#f92672">({</span>
      <span style="color:#a6e22e">@ApiImplicitParam</span><span style="color:#f92672">(</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;token&#34;</span><span style="color:#f92672">,</span> value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;认证令牌&#34;</span><span style="color:#f92672">,</span> paramType <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;header&#34;</span><span style="color:#f92672">)</span>
   <span style="color:#f92672">})</span>
   <span style="color:#a6e22e">@GetMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/profile&#34;</span><span style="color:#f92672">)</span>
   <span style="color:#66d9ef">public</span> UserProfile <span style="color:#a6e22e">getProfile</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
      <span style="color:#75715e">//...
</span><span style="color:#75715e"></span>   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDK 17（SpringDoc）
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Tag</span><span style="color:#f92672">(</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户管理&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户接口&#34;</span><span style="color:#f92672">)</span>
<span style="color:#a6e22e">@RestController</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserController</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Operation</span><span style="color:#f92672">(</span>summary <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;创建用户&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;根据DTO创建用户&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#a6e22e">@PostMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/users&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> User <span style="color:#a6e22e">createUser</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Parameter</span><span style="color:#f92672">(</span>description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户DTO&#34;</span><span style="color:#f92672">,</span> required <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
        <span style="color:#a6e22e">@RequestBody</span> UserDTO dto<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

   <span style="color:#a6e22e">@Parameters</span><span style="color:#f92672">({</span>
      <span style="color:#a6e22e">@Parameter</span><span style="color:#f92672">(</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;token&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;认证令牌&#34;</span><span style="color:#f92672">,</span> in <span style="color:#f92672">=</span> ParameterIn<span style="color:#f92672">.</span><span style="color:#a6e22e">HEADER</span><span style="color:#f92672">)</span>
   <span style="color:#f92672">})</span>
   <span style="color:#a6e22e">@GetMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/profile&#34;</span><span style="color:#f92672">)</span>
   <span style="color:#66d9ef">public</span> UserProfile <span style="color:#a6e22e">getProfile</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
      <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>模型类注解迁移：</strong></p>
<table>
<thead>
<tr>
<th><strong>SpringFox (Swagger 2.x)</strong></th>
<th><strong>SpringDoc (OpenAPI 3.x)</strong></th>
<th><strong>用途</strong></th>
<th><strong>示例</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@ApiModel</code></td>
<td><code>@Schema</code></td>
<td>描述数据模型类</td>
<td><code>@Schema(name = &quot;UserDTO&quot;, description = &quot;用户传输对象&quot;)</code></td>
</tr>
<tr>
<td><code>@ApiModelProperty</code></td>
<td><code>@Schema</code></td>
<td>描述模型字段的详细信息</td>
<td><code>@Schema(description = &quot;用户名&quot;, example = &quot;张三&quot;, requiredMode = REQUIRED)</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDK 8（SpringFox）
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@ApiModel</span><span style="color:#f92672">(</span>value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户实体&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@ApiModelProperty</span><span style="color:#f92672">(</span>value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户名&#34;</span><span style="color:#f92672">,</span> required <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> example <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;张三&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDK 17（SpringDoc）
</span><span style="color:#75715e"></span><span style="color:#a6e22e">@Schema</span><span style="color:#f92672">(</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;User&#34;</span><span style="color:#f92672">,</span> description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户实体&#34;</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Schema</span><span style="color:#f92672">(</span>description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;用户名&#34;</span><span style="color:#f92672">,</span> example <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;张三&#34;</span><span style="color:#f92672">,</span> requiredMode <span style="color:#f92672">=</span> Schema<span style="color:#f92672">.</span><span style="color:#a6e22e">RequiredMode</span><span style="color:#f92672">.</span><span style="color:#a6e22e">REQUIRED</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="33-全局配置调整">3.3 全局配置调整</h3>
<p><strong>是否还需要传统 SwaggerConfig？</strong></p>
<ul>
<li>
<p><strong>不需要</strong>：<code>Knife4j OpenAPI3</code> 基于 <code>SpringDoc</code>，无需配置 <code>Docket</code> 或 <code>Swagger2Markup</code>。</p>
</li>
<li>
<p><strong>必要配置</strong>：仅需定义 <code>OpenAPI Bean</code>（如上文的 OpenApiConfig）即可。</p>
</li>
</ul>
<h4 id="331-springdoc-配置类">3.3.1 SpringDoc 配置类</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OpenApiConfig</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#66d9ef">public</span> OpenAPI <span style="color:#a6e22e">customOpenAPI</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OpenAPI<span style="color:#f92672">()</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Info<span style="color:#f92672">()</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">title</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;API 文档&#34;</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">version</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">description</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;JDK 17 迁移示例&#34;</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">contact</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Contact<span style="color:#f92672">().</span><span style="color:#a6e22e">name</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xcbeyond技术支持&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">email</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;support@example.com&#34;</span><span style="color:#f92672">))</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">license</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> License<span style="color:#f92672">().</span><span style="color:#a6e22e">name</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Apache 2.0&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">url</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;https://springdoc.org&#34;</span><span style="color:#f92672">)))</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">externalDocs</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> ExternalDocumentation<span style="color:#f92672">()</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">description</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;详细文档&#34;</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">url</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;https://xcbeyond.com&#34;</span><span style="color:#f92672">))</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">components</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Components<span style="color:#f92672">()</span>
                        <span style="color:#f92672">.</span><span style="color:#a6e22e">addSecuritySchemes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;BearerAuth&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> SecurityScheme<span style="color:#f92672">()</span>
                                <span style="color:#f92672">.</span><span style="color:#a6e22e">type</span><span style="color:#f92672">(</span>SecurityScheme<span style="color:#f92672">.</span><span style="color:#a6e22e">Type</span><span style="color:#f92672">.</span><span style="color:#a6e22e">HTTP</span><span style="color:#f92672">)</span>
                                <span style="color:#f92672">.</span><span style="color:#a6e22e">scheme</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;bearer&#34;</span><span style="color:#f92672">)</span>
                                <span style="color:#f92672">.</span><span style="color:#a6e22e">bearerFormat</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;JWT&#34;</span><span style="color:#f92672">)));</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="332-分组配置多模块场景">3.3.2 分组配置（多模块场景）</h4>
<p>在微服务架构中，API 文档分组配置的核心管理需求是：</p>
<ul>
<li>
<p><strong>模块化展示</strong>：将不同业务域（用户/订单/支付）分离展示。</p>
</li>
<li>
<p><strong>权限隔离</strong>：区分公共 API 和管理 API。</p>
</li>
<li>
<p><strong>版本管理</strong>：同时维护 v1 和 v2 接口。</p>
</li>
<li>
<p><strong>依赖解耦</strong>：避免单个文档过大导致加载性能问题。</p>
</li>
</ul>
<p>分组配置参数详解:</p>
<table>
<thead>
<tr>
<th><strong>配置方法</strong></th>
<th><strong>参数说明</strong></th>
<th><strong>默认值</strong></th>
<th><strong>示例</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.group(String group)</code></td>
<td>分组唯一标识（显示在 UI 中）</td>
<td>必填</td>
<td><code>.group(&quot;用户管理&quot;)</code></td>
</tr>
<tr>
<td><code>.pathsToMatch(String... paths)</code></td>
<td>路径匹配规则（支持 Ant 风格）</td>
<td>可选</td>
<td><code>.pathsToMatch(&quot;/api/user/**&quot;)</code></td>
</tr>
<tr>
<td><code>.packagesToScan(String... pkgs)</code></td>
<td>扫描的包路径</td>
<td>可选</td>
<td><code>.packagesToScan(&quot;com.example&quot;)</code></td>
</tr>
<tr>
<td><code>.pathsToExclude(String... paths)</code></td>
<td>排除的路径</td>
<td>空数组</td>
<td><code>.pathsToExclude(&quot;/internal/**&quot;)</code></td>
</tr>
<tr>
<td><code>.addOpenApiMethodFilter(Predicate)</code></td>
<td>自定义方法过滤逻辑</td>
<td>无</td>
<td>见下面示例</td>
</tr>
<tr>
<td><code>.displayName(String name)</code></td>
<td>显示名称（覆盖 group 的显示）</td>
<td>同 group 值</td>
<td><code>.displayName(&quot;用户模块&quot;)</code></td>
</tr>
<tr>
<td><code>.addOperationCustomizer(...)</code></td>
<td>自定义操作处理器</td>
<td>无</td>
<td>见下面示例</td>
</tr>
</tbody>
</table>
<p><strong>通过合理的分组配置，可在 JDK 17 环境下构建清晰、安全、易维护的 API 文档体系，充分发挥 <code>SpringDoc</code> 和 <code>Knife4j</code> 的现代化文档能力。</strong></p>
<p><strong>基础分组配置：</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springdoc.core.models.GroupedOpenApi<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.annotation.Bean<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OpenApiGroupConfig</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// 用户管理分组
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">userApi</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;用户管理&#34;</span><span style="color:#f92672">)</span>                   <span style="color:#75715e">// 分组显示名称
</span><span style="color:#75715e"></span>                <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/api/user/**&#34;</span><span style="color:#f92672">)</span>        <span style="color:#75715e">// 路径匹配规则
</span><span style="color:#75715e"></span>                <span style="color:#f92672">.</span><span style="color:#a6e22e">packagesToScan</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.example.user&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// 包扫描路径
</span><span style="color:#75715e"></span>                <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 订单管理分组
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">orderApi</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;订单管理&#34;</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/api/order/**&#34;</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">packagesToScan</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.example.order&#34;</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// 分组自定义排序
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">firstGroup</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;01-核心接口&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">order</span><span style="color:#f92672">(</span>1<span style="color:#f92672">)</span>  <span style="color:#75715e">// 分组排序（数值越小越靠前）
</span><span style="color:#75715e"></span>               <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/core/**&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">secondGroup</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;02-辅助接口&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">order</span><span style="color:#f92672">(</span>2<span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/support/**&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>按安全权限分组：</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Bean</span>
<span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">adminApi</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;管理员接口&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/api/admin/**&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#75715e">// 只包含带有 @PreAuthorize(&#34;hasRole(&#39;ADMIN&#39;)&#34;) 的接口
</span><span style="color:#75715e"></span>            <span style="color:#f92672">.</span><span style="color:#a6e22e">addOpenApiMethodFilter</span><span style="color:#f92672">(</span>method <span style="color:#f92672">-&gt;</span> 
                method<span style="color:#f92672">.</span><span style="color:#a6e22e">isAnnotationPresent</span><span style="color:#f92672">(</span>PreAuthorize<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> 
                method<span style="color:#f92672">.</span><span style="color:#a6e22e">getAnnotation</span><span style="color:#f92672">(</span>PreAuthorize<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">).</span><span style="color:#a6e22e">value</span><span style="color:#f92672">().</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ADMIN&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>多版本 API 分组:</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Bean</span>
<span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">v1Api</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;API-v1&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/api/v1/**&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">displayName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;版本 1.0 (已弃用)&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#a6e22e">@Bean</span>
<span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">v2Api</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;API-v2&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/api/v2/**&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">displayName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;版本 2.0 (最新)&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>第三方接口分组:</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Bean</span>
<span style="color:#66d9ef">public</span> GroupedOpenApi <span style="color:#a6e22e">paymentApi</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> GroupedOpenApi<span style="color:#f92672">.</span><span style="color:#a6e22e">builder</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;支付网关&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">pathsToMatch</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/payment/**&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#75715e">// 排除内部实现类
</span><span style="color:#75715e"></span>            <span style="color:#f92672">.</span><span style="color:#a6e22e">packagesToExclude</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.example.internal.payment&#34;</span><span style="color:#f92672">)</span> 
            <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="34-包名迁移与模块化适配">3.4 包名迁移与模块化适配</h3>
<h4 id="341-全局替换包名">3.4.1 全局替换包名</h4>
<ul>
<li>
<p><strong>IDE 操作</strong>：</p>
<p>使用 IntelliJ/Eclipse 的全局替换功能（<code>Ctrl+Shift+R</code>），将以下包名替换：</p>
<ul>
<li>
<p><code>javax.servlet</code> → <code>jakarta.servlet</code></p>
</li>
<li>
<p><code>javax.validation</code> → <code>jakarta.validation</code></p>
</li>
<li>
<p><code>javax.persistence</code> → <code>jakarta.persistence</code></p>
</li>
</ul>
</li>
<li>
<p><strong>Maven 插件辅助</strong>：</p>
<p>使用 <code>maven-replacer-plugin</code> 自动化替换：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;plugin&gt;</span>
    <span style="color:#f92672">&lt;groupId&gt;</span>com.google.code.maven-replacer-plugin<span style="color:#f92672">&lt;/groupId&gt;</span>
    <span style="color:#f92672">&lt;artifactId&gt;</span>replacer<span style="color:#f92672">&lt;/artifactId&gt;</span>
    <span style="color:#f92672">&lt;version&gt;</span>1.5.3<span style="color:#f92672">&lt;/version&gt;</span>
    <span style="color:#f92672">&lt;executions&gt;</span>
        <span style="color:#f92672">&lt;execution&gt;</span>
            <span style="color:#f92672">&lt;phase&gt;</span>process-sources<span style="color:#f92672">&lt;/phase&gt;</span>
            <span style="color:#f92672">&lt;goals&gt;&lt;goal&gt;</span>replace<span style="color:#f92672">&lt;/goal&gt;&lt;/goals&gt;</span>
        <span style="color:#f92672">&lt;/execution&gt;</span>
    <span style="color:#f92672">&lt;/executions&gt;</span>
    <span style="color:#f92672">&lt;configuration&gt;</span>
        <span style="color:#f92672">&lt;includes&gt;</span>**/*.java<span style="color:#f92672">&lt;/includes&gt;</span>
        <span style="color:#f92672">&lt;replacements&gt;</span>
            <span style="color:#f92672">&lt;replacement&gt;</span>
                <span style="color:#f92672">&lt;token&gt;</span>javax.servlet<span style="color:#f92672">&lt;/token&gt;</span>
                <span style="color:#f92672">&lt;value&gt;</span>jakarta.servlet<span style="color:#f92672">&lt;/value&gt;</span>
            <span style="color:#f92672">&lt;/replacement&gt;</span>
        <span style="color:#f92672">&lt;/replacements&gt;</span>
    <span style="color:#f92672">&lt;/configuration&gt;</span>
<span style="color:#f92672">&lt;/plugin&gt;</span>
</code></pre></div></li>
</ul>
<h4 id="342-模块化配置jdk-17">3.4.2 模块化配置（JDK 17+）</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// src/main/java/module-info.java
</span><span style="color:#75715e"></span>open module com<span style="color:#f92672">.</span><span style="color:#a6e22e">example</span><span style="color:#f92672">.</span><span style="color:#a6e22e">api</span> <span style="color:#f92672">{</span>
    requires spring<span style="color:#f92672">.</span><span style="color:#a6e22e">boot</span><span style="color:#f92672">;</span>
    requires spring<span style="color:#f92672">.</span><span style="color:#a6e22e">boot</span><span style="color:#f92672">.</span><span style="color:#a6e22e">autoconfigure</span><span style="color:#f92672">;</span>
    requires spring<span style="color:#f92672">.</span><span style="color:#a6e22e">web</span><span style="color:#f92672">;</span>
    requires springdoc<span style="color:#f92672">.</span><span style="color:#a6e22e">openapi</span><span style="color:#f92672">.</span><span style="color:#a6e22e">common</span><span style="color:#f92672">;</span>
    requires com<span style="color:#f92672">.</span><span style="color:#a6e22e">fasterxml</span><span style="color:#f92672">.</span><span style="color:#a6e22e">jackson</span><span style="color:#f92672">.</span><span style="color:#a6e22e">databind</span><span style="color:#f92672">;</span>
    exports com<span style="color:#f92672">.</span><span style="color:#a6e22e">example</span><span style="color:#f92672">.</span><span style="color:#a6e22e">api</span><span style="color:#f92672">.</span><span style="color:#a6e22e">controller</span><span style="color:#f92672">;</span>
    exports com<span style="color:#f92672">.</span><span style="color:#a6e22e">example</span><span style="color:#f92672">.</span><span style="color:#a6e22e">api</span><span style="color:#f92672">.</span><span style="color:#a6e22e">model</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="4迁移后的验证与优化">4、迁移后的验证与优化</h2>
<h3 id="41-验证访问">4.1 验证访问</h3>
<p>启动应用后，访问以下地址：</p>
<p>Knife4j UI 文档：<code>http://localhost:8080/doc.html</code></p>
<p>OpenAPI JSON：<code>http://localhost:8080/v3/api-docs</code></p>
<h3 id="42-文档增强">4.2 文档增强</h3>
<p><strong>响应示例</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Operation</span><span style="color:#f92672">(</span>summary <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;创建用户&#34;</span><span style="color:#f92672">)</span>
<span style="color:#a6e22e">@ApiResponses</span><span style="color:#f92672">({</span>
    <span style="color:#a6e22e">@ApiResponse</span><span style="color:#f92672">(</span>
        responseCode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;201&#34;</span><span style="color:#f92672">,</span>
        content <span style="color:#f92672">=</span> <span style="color:#a6e22e">@Content</span><span style="color:#f92672">(</span>
            mediaType <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;application/json&#34;</span><span style="color:#f92672">,</span>
            schema <span style="color:#f92672">=</span> <span style="color:#a6e22e">@Schema</span><span style="color:#f92672">(</span>implementation <span style="color:#f92672">=</span> User<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">),</span>
            examples <span style="color:#f92672">=</span> <span style="color:#a6e22e">@ExampleObject</span><span style="color:#f92672">(</span>
                name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;successExample&#34;</span><span style="color:#f92672">,</span>
                value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">                    {
</span><span style="color:#e6db74">                      &#34;</span>id<span style="color:#e6db74">&#34;: 1,
</span><span style="color:#e6db74">                      &#34;</span>name<span style="color:#e6db74">&#34;: &#34;</span>张三<span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">                    }
</span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>
            <span style="color:#f92672">)</span>
        <span style="color:#f92672">)</span>
    <span style="color:#f92672">),</span>
    <span style="color:#a6e22e">@ApiResponse</span><span style="color:#f92672">(</span>
        responseCode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">,</span>
        content <span style="color:#f92672">=</span> <span style="color:#a6e22e">@Content</span><span style="color:#f92672">(</span>
            examples <span style="color:#f92672">=</span> <span style="color:#a6e22e">@ExampleObject</span><span style="color:#f92672">(</span>
                name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;errorExample&#34;</span><span style="color:#f92672">,</span>
                value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">                    {
</span><span style="color:#e6db74">                      &#34;</span>code<span style="color:#e6db74">&#34;: &#34;</span>INVALID_REQUEST<span style="color:#e6db74">&#34;,
</span><span style="color:#e6db74">                      &#34;</span>message<span style="color:#e6db74">&#34;: &#34;</span>用户名不能为空<span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">                    }
</span><span style="color:#e6db74">                    &#34;&#34;&#34;</span>
            <span style="color:#f92672">)</span>
        <span style="color:#f92672">)</span>
    <span style="color:#f92672">)</span>
<span style="color:#f92672">})</span>
<span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">createUser</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@RequestBody</span> User user<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#f92672">...</span> <span style="color:#f92672">}</span>
</code></pre></div><p><strong>离线文档导出</strong>:</p>
<p><code>Knife4j</code> 导出：访问 <code>http://localhost:8080/doc.html#/home</code>，点击“下载 Markdown”或“下载 OpenAPI JSON”。</p>
<h3 id="43-性能与安全优化">4.3 性能与安全优化</h3>
<ul>
<li>
<p><strong>生产环境禁用 UI</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"> <span style="color:#f92672">springdoc</span>:
    <span style="color:#f92672">swagger-ui</span>:
       <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">false</span>  <span style="color:#75715e"># 禁用 UI</span>
    <span style="color:#f92672">api-docs</span>:
       <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>   <span style="color:#75715e"># 保留 JSON 生成（供内部系统使用）</span>
</code></pre></div></li>
<li>
<p><strong>启用 OAuth2 支持</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#a6e22e">@Bean</span>
 SecurityFilterChain <span style="color:#a6e22e">securityFilterChain</span><span style="color:#f92672">(</span>HttpSecurity http<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
    http
       <span style="color:#f92672">.</span><span style="color:#a6e22e">authorizeHttpRequests</span><span style="color:#f92672">(</span>auth <span style="color:#f92672">-&gt;</span> auth
             <span style="color:#f92672">.</span><span style="color:#a6e22e">requestMatchers</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/v3/api-docs/**&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">hasRole</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;DEVOPS&#34;</span><span style="color:#f92672">)</span>
             <span style="color:#f92672">.</span><span style="color:#a6e22e">anyRequest</span><span style="color:#f92672">().</span><span style="color:#a6e22e">authenticated</span><span style="color:#f92672">()</span>
       <span style="color:#f92672">)</span>
       <span style="color:#f92672">.</span><span style="color:#a6e22e">oauth2ResourceServer</span><span style="color:#f92672">(</span>OAuth2ResourceServerConfigurer<span style="color:#f92672">::</span>jwt<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
 <span style="color:#f92672">}</span>
</code></pre></div></li>
</ul>
<h2 id="5常见问题与解决方案">5、常见问题与解决方案</h2>
<h3 id="51-错误type-javaxservlethttphttpservletrequest-not-present">5.1. 错误：<code>Type javax.servlet.http.HttpServletRequest not present</code></h3>
<p>错误日志：<code>java.lang.TypeNotPresentException: Type javax.servlet.http.HttpServletRequest not present</code></p>
<p><strong>原因</strong>：未迁移到 Jakarta EE 包名。</p>
<p><strong>解决步骤</strong>：</p>
<ol>
<li>检查是否遗漏包名替换（使用 IDE 全局搜索 javax.servlet），更新依赖至 Jakarta 版本。</li>
<li>全局替换代码中的 <code>javax.servlet</code> 为 <code>jakarta.servlet</code>。</li>
<li>运行 <code>mvn dependency:tree | grep javax.servlet</code> 确认无冲突依赖。</li>
<li>更新第三方库至 Jakarta 兼容版本（如 Hibernate 6.x、Tomcat 10.x）。</li>
</ol>
<h3 id="52-knife4j-访问-dochtml-报-404">5.2. Knife4j 访问 <code>/doc.html</code> 报 404</h3>
<p><strong>原因</strong>：静态资源被拦截或未正确映射。</p>
<p><strong>解决步骤</strong>：</p>
<ol>
<li>
<p>确认使用的是 Knife4j OpenAPI3 的 Spring Boot Starter（<code>knife4j-openapi3-jakarta-spring-boot-starter</code>），而非旧版 <code>Knife4j</code> 或 <code>SpringFox</code>。</p>
</li>
<li>
<p>检查静态资源路径（若自定义了 WebMvcConfigurer）：</p>
<p>Knife4j 的静态资源默认位于 <code>classpath:/META-INF/resources/webjars/knife4j-openapi3-ui/</code>，需确保资源未被拦截或覆盖。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WebConfig</span> <span style="color:#66d9ef">implements</span> WebMvcConfigurer <span style="color:#f92672">{</span>

   <span style="color:#a6e22e">@Override</span>
   <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addResourceHandlers</span><span style="color:#f92672">(</span>ResourceHandlerRegistry registry<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#75715e">// 添加 Knife4j 的静态资源映射
</span><span style="color:#75715e"></span>      registry<span style="color:#f92672">.</span><span style="color:#a6e22e">addResourceHandler</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/doc.html&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">addResourceLocations</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;classpath:/META-INF/resources/&#34;</span><span style="color:#f92672">);</span>
      registry<span style="color:#f92672">.</span><span style="color:#a6e22e">addResourceHandler</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/webjars/**&#34;</span><span style="color:#f92672">)</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">addResourceLocations</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;classpath:/META-INF/resources/webjars/&#34;</span><span style="color:#f92672">);</span>
   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div></li>
<li>
<p>检查 <code>Spring Security</code> 配置是否放行 <code>/doc.html</code> 和 <code>/webjars/**</code>：</p>
<p>如果项目集成了 <code>Spring Security</code>，需放行 <code>Knife4j</code> 的静态资源和 API 文档接口。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> org.springframework.context.annotation.Bean<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.security.web.SecurityFilterChain<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SecurityConfig</span> <span style="color:#f92672">{</span>

   <span style="color:#a6e22e">@Bean</span>
   <span style="color:#66d9ef">public</span> SecurityFilterChain <span style="color:#a6e22e">securityFilterChain</span><span style="color:#f92672">(</span>HttpSecurity http<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
      http
            <span style="color:#f92672">.</span><span style="color:#a6e22e">authorizeHttpRequests</span><span style="color:#f92672">(</span>auth <span style="color:#f92672">-&gt;</span> auth
               <span style="color:#75715e">// 放行 Knife4j 相关路径
</span><span style="color:#75715e"></span>               <span style="color:#f92672">.</span><span style="color:#a6e22e">requestMatchers</span><span style="color:#f92672">(</span>
                  <span style="color:#e6db74">&#34;/doc.html&#34;</span><span style="color:#f92672">,</span>
                  <span style="color:#e6db74">&#34;/webjars/**&#34;</span><span style="color:#f92672">,</span>
                  <span style="color:#e6db74">&#34;/v3/api-docs/**&#34;</span><span style="color:#f92672">,</span>
                  <span style="color:#e6db74">&#34;/favicon.ico&#34;</span>
               <span style="color:#f92672">).</span><span style="color:#a6e22e">permitAll</span><span style="color:#f92672">()</span>
               <span style="color:#f92672">.</span><span style="color:#a6e22e">anyRequest</span><span style="color:#f92672">().</span><span style="color:#a6e22e">authenticated</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">csrf</span><span style="color:#f92672">(</span>csrf <span style="color:#f92672">-&gt;</span> csrf<span style="color:#f92672">.</span><span style="color:#a6e22e">disable</span><span style="color:#f92672">());</span> <span style="color:#75715e">// 如果不需要 CSRF 防护
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">return</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
   <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div></li>
</ol>
<h3 id="53-注解不生效或文档无内容">5.3 注解不生效或文档无内容</h3>
<p><strong>检查项</strong>：</p>
<ol>
<li>
<p>确保控制器添加 <code>@Tag</code>，方法添加 <code>@Operation</code>。</p>
</li>
<li>
<p>模型类字段未标注 <code>@Schema</code>。</p>
</li>
<li>
<p>包扫描路径未覆盖（通过 <code>@ComponentScan</code> 或 <code>springdoc.packagesToScan</code> 配置）。</p>
</li>
<li>
<p>排除旧版 Swagger 依赖冲突：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn dependency:tree -Dincludes<span style="color:#f92672">=</span>io.springfox
</code></pre></div></li>
</ol>
<h2 id="6总结">6、总结</h2>
<p>从 JDK 8 迁移到 JDK 17 不仅是版本的升级，更是技术栈向现代 Java 生态的过渡。通过 <strong>依赖替换、注解迁移、包名调整、模块化适配</strong> 四步核心操作，可高效完成 Swagger 升级。Knife4j 和 SpringDoc 的组合，不仅解决了兼容性问题，还提供了更强大的 API 文档管理能力。升级后，建议通过自动化测试和持续监控，确保系统的稳定性和可维护性。</p>

          </div>
          
          
          <div class="col-12">
            
            
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
	window.onload = function() {
        const gitalk = new Gitalk({
        clientID: 'c10f597904f9726fdd0e',
        clientSecret: '7e2bcbbd69c3b6369893995ff81aec88e4b53800',
        repo: 'xcbeyond.github.io',
        owner: 'xcbeyond',
        admin: ['xcbeyond'],
        id: location.pathname, 
        distractionFreeMode: false 
      });
      (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
          return;
        }
        gitalk.render('gitalk-container');
      })();
    }
</script>
          </div>
          
        </div>
      </div>
      <!-- sidebar -->
<aside class="col-lg-4 order-1 order-lg-2">
  <!-- categories -->
  <div class="bg-white mb-5">
    <h4 class="mb-4">分类</h4>
    <ul class="list-unstyled">
      <li class="border-bottom"><a href="/categories/go" class="d-block pb-3 mt-3">Go</a></li>
      <li class="border-bottom"><a href="/categories/java" class="d-block pb-3 mt-3">Java</a></li>
      <li class="border-bottom"><a href="/categories/kubernetes" class="d-block pb-3 mt-3">Kubernetes</a></li>
      <li class="border-bottom"><a href="/categories/mysql" class="d-block pb-3 mt-3">Mysql</a></li>
      <li class="border-bottom"><a href="/categories/service-mesh" class="d-block pb-3 mt-3">Service mesh</a></li>
      <li class="border-bottom"><a href="/categories/%e4%b8%ad%e5%8f%b0" class="d-block pb-3 mt-3">中台</a></li>
      <li class="border-bottom"><a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f" class="d-block pb-3 mt-3">云原生</a></li>
      <li class="border-bottom"><a href="/categories/%e5%85%b6%e4%bb%96" class="d-block pb-3 mt-3">其他</a></li>
      <li class="border-bottom"><a href="/categories/%e5%ae%b9%e5%99%a8" class="d-block pb-3 mt-3">容器</a></li>
      <li class="border-bottom"><a href="/categories/%e5%be%ae%e6%9c%8d%e5%8a%a1" class="d-block pb-3 mt-3">微服务</a></li>
      <li class="border-bottom"><a href="/categories/%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96" class="d-block pb-3 mt-3">性能优化</a></li>
      <li class="border-bottom"><a href="/categories/%e7%a8%8b%e5%ba%8f%e4%ba%ba%e7%94%9f" class="d-block pb-3 mt-3">程序人生</a></li>
      <li class="border-bottom"><a href="/categories/%e8%af%84%e6%b5%8b" class="d-block pb-3 mt-3">评测</a></li>
      <li class="border-bottom"><a href="/categories/%e8%bf%90%e7%bb%b4" class="d-block pb-3 mt-3">运维</a></li>
    </ul>
  </div>
  <!-- tags -->
  <div class="bg-white mb-5">
    <h4 class="mb-4">标签</h4>
    <ul class="list-inline tag-list">
      <li class="list-inline-item mb-2"><a href="/tags/ansible">Ansible</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/centos">Centos</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/cobra">Cobra</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/devops">Devops</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/docker">Docker</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/dockerfile">Dockerfile</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/gateway">Gateway</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/go%e8%af%ad%e8%a8%80%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a">Go语言从入门到精通</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/hostnetwork">Hostnetwork</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/hugo">Hugo</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/infoq">Infoq</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/ingress">Ingress</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/istio">Istio</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/java">Java</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/jdk17">Jdk17</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/kubernetes">Kubernetes</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/kubernetes%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a">Kubernetes从入门到精通</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/linux">Linux</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/markdown">Markdown</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/mysql%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96">Mysql性能优化</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/nfs">Nfs</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/orangepi">Orangepi</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/pkg">Pkg</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/rbac">Rbac</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/service-mesh">Service mesh</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/spring-cloud">Spring cloud</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/swagger">Swagger</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/tcp">Tcp</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/website">Website</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/yapi">Yapi</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e4%ba%91%e6%95%88">云效</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e5%91%bd%e4%bb%a4">命令</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e5%ae%89%e8%a3%85%e9%83%a8%e7%bd%b2">安装部署</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96">性能优化</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e6%9c%8d%e5%8a%a1%e6%8b%86%e5%88%86">服务拆分</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f">环境变量</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e7%9b%98%e7%82%b92021">盘点2021</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e7%b4%a2%e5%bc%95">索引</a></li>
      <li class="list-inline-item mb-2"><a href="/tags/%e9%95%9c%e5%83%8f">镜像</a></li>
    </ul>
  </div>
  <!-- latest post -->
  <div class="bg-white">
    <h4 class="mb-4">最新文章</h4>
    <!-- post-item -->
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/java/jdk17/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/jdk17-upgrade-swagger.png"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/java/jdk17/">
          <h5 class="mt-0">从 JDK 8 到 JDK 17：Swagger 升级迁移指南</h5>
        </a>
        2025-05-30 08:30:01
      </div>
    </div>
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/operations/centos-kernel-upgrade/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/linux-kernel-upgrade.jpeg"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/operations/centos-kernel-upgrade/">
          <h5 class="mt-0">CentOS 7 内核升级指南：解决兼容性问题并提升性能</h5>
        </a>
        2025-05-13 08:56:41
      </div>
    </div>
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/kubernetes/the-guide-to-kubernetes-image-pull-authentication/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/image-pull.png"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/kubernetes/the-guide-to-kubernetes-image-pull-authentication/">
          <h5 class="mt-0">Kubernetes 镜像拉取认证完全指南：8 种实战方法解决私有仓库访问难题</h5>
        </a>
        2025-04-30 09:51:43
      </div>
    </div>
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/kubernetes/deep-analysis-of-rabc-in-kubernetes/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/rabc.png"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/kubernetes/deep-analysis-of-rabc-in-kubernetes/">
          <h5 class="mt-0">Kubernetes RBAC 深入解析：权限体系详解、配置与排查</h5>
        </a>
        2025-04-27 09:55:20
      </div>
    </div>
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/kubernetes/deep-analysis-of-hostnetwork-in-kubernetes/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/kubernetes-cluster-network.svg"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/kubernetes/deep-analysis-of-hostnetwork-in-kubernetes/">
          <h5 class="mt-0">Kubernetes 中 hostNetwork 的深度解析：使用场景、最佳实践与避坑指南</h5>
        </a>
        2025-04-24 08:29:34
      </div>
    </div>
    
    <div class="media border-bottom border-color pb-3 mb-3">
      <a href="https://xcbeyond.cn/blog/operations/installing-configuring-and-mounting-nfs-in-linux-guide/"><img class="mr-3 post-thumb-sm" src="https://xcbeyond.cn/images/blog/nfs.png"></a>
      <div class="media-body">
        <a href="https://xcbeyond.cn/blog/operations/installing-configuring-and-mounting-nfs-in-linux-guide/">
          <h5 class="mt-0">在Linux中安装、配置和挂载NFS的完整指南</h5>
        </a>
        2025-04-04 18:00:29
      </div>
    </div>
    
  </div>
  <!-- toc -->
  
  <div class="bg-white px-4 py-5 box-shadow mb-5 sticky-top">
    <h4 class="mb-4">目录</h4>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1背景">1、背景</a>
      <ul>
        <li><a href="#11-技术演进">1.1 技术演进</a></li>
        <li><a href="#12-升级的必要性">1.2 升级的必要性</a></li>
      </ul>
    </li>
    <li><a href="#2技术栈对比与选型">2、技术栈对比与选型</a>
      <ul>
        <li><a href="#21-jdk-8-与-jdk-17-的-swagger-技术栈对比">2.1 JDK 8 与 JDK 17 的 Swagger 技术栈对比</a></li>
        <li><a href="#22-版本兼容性矩阵">2.2 版本兼容性矩阵</a></li>
      </ul>
    </li>
    <li><a href="#3快速升级步骤">3、快速升级步骤</a>
      <ul>
        <li><a href="#31-依赖管理升级">3.1 依赖管理升级</a></li>
        <li><a href="#32-代码层迁移注解更新">3.2 代码层迁移（注解更新）</a></li>
        <li><a href="#33-全局配置调整">3.3 全局配置调整</a></li>
        <li><a href="#34-包名迁移与模块化适配">3.4 包名迁移与模块化适配</a></li>
      </ul>
    </li>
    <li><a href="#4迁移后的验证与优化">4、迁移后的验证与优化</a>
      <ul>
        <li><a href="#41-验证访问">4.1 验证访问</a></li>
        <li><a href="#42-文档增强">4.2 文档增强</a></li>
        <li><a href="#43-性能与安全优化">4.3 性能与安全优化</a></li>
      </ul>
    </li>
    <li><a href="#5常见问题与解决方案">5、常见问题与解决方案</a>
      <ul>
        <li><a href="#51-错误type-javaxservlethttphttpservletrequest-not-present">5.1. 错误：<code>Type javax.servlet.http.HttpServletRequest not present</code></a></li>
        <li><a href="#52-knife4j-访问-dochtml-报-404">5.2. Knife4j 访问 <code>/doc.html</code> 报 404</a></li>
        <li><a href="#53-注解不生效或文档无内容">5.3 注解不生效或文档无内容</a></li>
      </ul>
    </li>
    <li><a href="#6总结">6、总结</a></li>
  </ul>
</nav>
  </div>
</aside>
<!-- /sidebar -->
    </div>
  </div>
</section>



<footer>
  
  
  
  
  
  <div class="copyright py-4 bg-footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-7 text-sm-left text-center">
          <p class="mb-0">Copyright © 2021-2025 xcbeyond 版权所有.
            
          </p>
        </div>
        <div class="col-sm-5 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://xcbeyond.blog.csdn.net/"><i class="ti-facebook text-primary"></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://mp.weixin.qq.com/s/Wr0RS2BBXTSJI82pck2aXw"><i class="ti-instagram text-primary"></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://github.com/xcbeyond"><i class="ti-github text-primary"></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>


<!-- Google Map API -->


<!-- JS Plugins -->

<script src="https://xcbeyond.cn/plugins/jQuery/jquery.min.js"></script>

<script src="https://xcbeyond.cn/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://xcbeyond.cn/plugins/slick/slick.min.js"></script>

<script src="https://xcbeyond.cn/plugins/venobox/venobox.min.js"></script>

<script src="https://xcbeyond.cn/plugins/filterizr/jquery.filterizr.min.js"></script>


<!-- Main Script -->

<script src="https://xcbeyond.cn/js/script.min.js"></script>

<!-- google analitycs -->







</body>

</html>